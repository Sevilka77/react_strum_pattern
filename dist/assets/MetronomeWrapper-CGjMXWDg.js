import{j as e,b as g,I as D,l as E,M as x,L as d,x as F}from"./ui-CGOkHvrh.js";import{r as m,a as z}from"./vendor-Bn94jRP8.js";import{c as C,u as y,A as u,X as I,a as k,b as B,d as w,e as N,f as S,g as f,h as U,i as L,j as W}from"./index-DwrmdHvz.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=C("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=C("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),H=({icon:n,active:t})=>{const r=m.useMemo(()=>({fill:t?"currentColor":"#ffffff0",fontSize:"inherit"}),[t]);return e.jsx(g,{variant:"h1",component:"p",sx:{display:"flex",alignItems:"center"},children:z.cloneElement(n,{sx:r})})},R=m.memo(H);function T({id:n,noteDuration:t}){let r,o;if(t==="4n")r=n+1,o="#ffa726";else if(t==="8n")r=n%2===0?Math.floor(n/2)+1:"и",o=n%2===0?"#ffa726":"#FFFFFF";else if(t==="16n"){const s=n%4;s===0?(r=Math.floor(n/4)+1,o="#ffa726"):s===1||s===2?(r=s===1?"та":"и",o="#FFFFFF"):(r="та",o="#FFFFFF")}else r=n+1,o="warning.main";return e.jsx(g,{variant:"h4",component:"p",sx:{textAlign:"center",color:o,textShadow:`0 0 42px ${o}`},children:r})}const G=({index:n})=>{const{config:t,dispatch:r}=y(),o=t.beatPattern||"",[s,j]=m.useState(null),p=!!s,a=c=>{const M=o.split("").map((h,P)=>P===n?c:h).join("");r({type:"setBeatPattern",data:M})},i=()=>{if(n>=0){const c=o.split("").filter((M,h)=>h!==n).join("");r({type:"setBeatPattern",data:c})}},l=c=>{["A","1","0","x","c","h","b"].includes(c)?a(c):c==="del"&&i(),b()},A=c=>{j(c.currentTarget)},b=()=>{j(null)};return e.jsxs(e.Fragment,{children:[e.jsx(D,{id:"basic-button","aria-controls":p?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:A,sx:{borderRadius:"8px",border:"2px solid #4A434B",mt:1},children:e.jsx(v,{})}),e.jsxs(E,{id:"basic-menu",anchorEl:s,open:p,onClose:b,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsxs(x,{onClick:()=>l("A"),children:[e.jsx(d,{children:e.jsx(u,{color:"warning"})}),"Акцент"]}),e.jsxs(x,{onClick:()=>l("1"),children:[e.jsx(d,{children:e.jsx(u,{color:"primary"})}),"Удар"]}),e.jsxs(x,{onClick:()=>l("c"),children:[e.jsx(d,{children:e.jsx(I,{color:"primary"})}),"По заглушеным"]}),e.jsxs(x,{onClick:()=>l("b"),children:[e.jsx(d,{children:e.jsx(k,{color:"primary"})}),"По басам"]}),e.jsxs(x,{onClick:()=>l("h"),children:[e.jsx(d,{children:e.jsx(B,{color:"primary"})}),"По высоким"]}),e.jsxs(x,{onClick:()=>l("x"),children:[e.jsx(d,{children:e.jsx(w,{color:"primary"})}),"Заглушка"]}),e.jsxs(x,{onClick:()=>l("0"),children:[e.jsx(d,{children:e.jsx(u,{color:"disabled"})}),"Пропуск"]}),e.jsxs(x,{onClick:()=>l("del"),children:[e.jsx(d,{children:e.jsx(X,{})}),"Удалить"]})]})]})},V=m.memo(G),Z=({noteDuration:n,beatPattern:t})=>{const{config:r}=y(),o=t,{activeBeat:s}=N(),j=m.useMemo(()=>o.map((p,a)=>{const i=a%2!==0;switch(p){case"0":return i?e.jsx(f,{color:"disabled"}):e.jsx(u,{color:"disabled"});case"1":return i?e.jsx(f,{color:"primary"}):e.jsx(u,{color:"primary"});case"b":return i?e.jsx(L,{color:"primary"}):e.jsx(k,{color:"primary"});case"h":return i?e.jsx(U,{color:"primary"}):e.jsx(B,{color:"primary"});case"A":return i?e.jsx(f,{color:"warning"}):e.jsx(u,{color:"warning"});case"x":return e.jsx(w,{color:"primary"});case"c":return i?e.jsx(S,{color:"primary"}):e.jsx(I,{color:"primary"});default:return null}}),[o]);return e.jsx(e.Fragment,{children:e.jsx(F,{container:!0,columns:8,alignItems:"center",justifyContent:"center",children:o.map((p,a)=>e.jsxs(F,{size:{xs:2,sm:1,md:1},sx:{boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minWidth:"max-content"},children:[e.jsx(T,{id:a,noteDuration:n}),e.jsx(R,{icon:j[a],active:s===a}),r.editMode&&e.jsx(V,{index:a})]},a))})})},_=m.memo(Z);function K(){const{config:n}=y(),{beatPattern:t,noteDuration:r}=n;W(n);const o=m.useMemo(()=>t.split(""),[t]),s=m.useMemo(()=>r,[r]);return e.jsx(_,{noteDuration:s,beatPattern:o})}export{K as default};
