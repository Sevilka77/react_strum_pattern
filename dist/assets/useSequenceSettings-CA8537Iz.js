import{j as n,i as S,a as p,m as T,M,n as f,B as j}from"./ui-_ppKRIVF.js";import{r}from"./vendor-Bn94jRP8.js";import{c as y,u as C}from"./LDJson-CrGSvPQ1.js";import{S as b,P as E}from"./Icons-VQ3Jseo-.js";import{s as P,g,C as F,S as w}from"./index-BMwkpoh6.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function v(t){const[s,o]=r.useState([]);return()=>{const l=Date.now()/1e3,i=[...s,l].slice(-4);if(i.length>1){const u=i.slice(1).map((c,e)=>c-i[e]),h=u.reduce((c,e)=>c+e)/u.length,d=Math.round(60/h);t(d)}o(i)}}const m={minWidth:"40px",height:"40px",padding:0,color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center"},B=()=>{const{toneSettings:t,dispatch:s}=C(),[o,a]=r.useState(t.tempo);r.useEffect(()=>{a(t.tempo)},[t.tempo]);const l=()=>{const e=Math.min(o+10,300);a(e),s({type:"SET_TEMPO",payload:e})},i=()=>{const e=Math.max(o-10,40);a(e),s({type:"SET_TEMPO",payload:e})},u=e=>{const x=Number(e.target.value);a(x),s({type:"SET_TEMPO",payload:x})},d=v(e=>{a(e),s({type:"SET_TEMPO",payload:e})}),c=()=>{const e=Math.min(Math.max(o,40),300);e!==o&&(a(e),s({type:"SET_TEMPO",payload:e}))};return n.jsxs(S,{spacing:1,direction:"row",sx:{alignItems:"center",justifyContent:"center"},children:[n.jsx(p,{sx:m,onClick:i,color:"primary",children:n.jsx(k,{})}),n.jsx(T,{variant:"standard",value:o,onChange:u,size:"small",sx:{width:"10%",border:0},onBlur:c})," ",n.jsx(p,{sx:m,onClick:l,color:"primary",children:n.jsx(I,{})}),n.jsx(p,{sx:m,onClick:d,color:"primary",children:"TAP"})]})},_={},A=()=>{const{toneSettings:t,dispatch:s}=C(),o=async()=>{await P(),s({type:"SET_IS_PLAYING",payload:!t.isPlaying}),t.isPlaying?g().start():g().stop()};return r.useEffect(()=>()=>{t.isPlaying&&s({type:"SET_IS_PLAYING",payload:!1})},[s,t.isPlaying]),n.jsx(p,{sx:_,value:"play",onClick:o,children:t.isPlaying?n.jsx(b,{}):n.jsx(E,{})})},D=()=>{const t=r.useContext(F);if(!t)throw new Error("useChordSettings must be used within a ChordSettingsProvider");return t},q={width:"40px",minWidth:"40px",height:"40px",padding:0,color:"#FFFFFF",backgroundColor:"#1976D2",borderRadius:"8px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)","&:hover":{backgroundColor:"#1565C0"},"&:active":{backgroundColor:"#0D47A1"},display:"flex",alignItems:"center",justifyContent:"center"},N=()=>{const{chordSettings:t,dispatch:s}=D(),[o,a]=r.useState(null),l=!!o,i=e=>{s({type:"setCurrentChord",payload:e})},u=["G","A","C","D","E","F","Fm","Am","Dm","Em","Bm"],h=e=>{u.includes(e)&&i(e),c()},d=e=>{a(e.currentTarget)},c=()=>{a(null)};return n.jsxs(n.Fragment,{children:[n.jsx(p,{sx:q,id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:d,children:t.currentChord}),n.jsx(M,{id:"basic-menu",anchorEl:o,open:l,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"},children:u.map(e=>n.jsx(f,{onClick:()=>h(e),children:e},e))})]})},O=r.memo(N),L=()=>n.jsxs(j,{sx:{width:"100%",display:"flex",pt:1,pb:1,flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:1},children:[n.jsx(A,{}),n.jsx(B,{}),n.jsx(O,{})]}),$=r.memo(L),z=()=>{const t=r.useContext(w);if(!t)throw new Error("useSequenceSettings must be used within a SequenceSettingsProvider");return t};export{$ as C,k as M,I as P,D as a,z as u};
