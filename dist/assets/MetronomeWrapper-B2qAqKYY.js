import{j as e,b as F,I as D,l as E,M as d,L as m,y as C}from"./ui-CvVpngqa.js";import{r as u,a as z}from"./vendor-Bn94jRP8.js";import{c as g,u as S,A as p,X as k,a as I,b as B,d as w,e as y,f as N,g as U,h as f,i as L,j as W,k as X}from"./index-LGFiyrR2.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=g("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=g("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),R=({icon:n,active:s})=>{const t=u.useMemo(()=>({fill:s?"currentColor":"#ffffff0",fontSize:"inherit"}),[s]);return e.jsx(F,{variant:"h1",component:"p",sx:{display:"flex",alignItems:"center"},children:z.cloneElement(n,{sx:t})})},T=u.memo(R);function G({id:n,noteDuration:s}){let t,r;if(s==="4n")t=n+1,r="#ffa726";else if(s==="8n")t=n%2===0?Math.floor(n/2)+1:"и",r=n%2===0?"#ffa726":"#FFFFFF";else if(s==="16n"){const o=n%4;o===0?(t=Math.floor(n/4)+1,r="#ffa726"):o===1||o===2?(t=o===1?"та":"и",r="#FFFFFF"):(t="та",r="#FFFFFF")}else t=n+1,r="warning.main";return e.jsx(F,{variant:"h4",component:"p",sx:{textAlign:"center",color:r,textShadow:`0 0 42px ${r}`},children:t})}const V=({index:n})=>{const{config:s,dispatch:t}=S(),r=s.beatPattern||"",[o,j]=u.useState(null),i=!!o,a=c=>{const M=r.split("").map((h,P)=>P===n?c:h).join("");t({type:"setBeatPattern",data:M})},l=()=>{if(n>=0){const c=r.split("").filter((M,h)=>h!==n).join("");t({type:"setBeatPattern",data:c})}},x=c=>{["A","1","0","x","c","h","b"].includes(c)?a(c):c==="del"&&l(),b()},A=c=>{j(c.currentTarget)},b=()=>{j(null)};return e.jsxs(e.Fragment,{children:[e.jsx(D,{id:"basic-button","aria-controls":i?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:A,sx:{borderRadius:"8px",border:"2px solid #4A434B",mt:1},children:e.jsx(H,{})}),e.jsxs(E,{id:"basic-menu",anchorEl:o,open:i,onClose:b,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsxs(d,{onClick:()=>x("A"),children:[e.jsx(m,{children:e.jsx(p,{color:"warning"})}),"Акцент"]}),e.jsxs(d,{onClick:()=>x("1"),children:[e.jsx(m,{children:e.jsx(p,{color:"primary"})}),"Удар"]}),e.jsxs(d,{onClick:()=>x("c"),children:[e.jsx(m,{children:e.jsx(k,{color:"primary"})}),"По заглушеным"]}),e.jsxs(d,{onClick:()=>x("b"),children:[e.jsx(m,{children:e.jsx(I,{color:"primary"})}),"По басам"]}),e.jsxs(d,{onClick:()=>x("h"),children:[e.jsx(m,{children:e.jsx(B,{color:"primary"})}),"По высоким"]}),e.jsxs(d,{onClick:()=>x("x"),children:[e.jsx(m,{children:e.jsx(w,{color:"primary"})}),"Заглушка"]}),e.jsxs(d,{onClick:()=>x("0"),children:[e.jsx(m,{children:e.jsx(p,{color:"disabled"})}),"Пропуск"]}),e.jsxs(d,{onClick:()=>x("del"),children:[e.jsx(m,{children:e.jsx(v,{})}),"Удалить"]})]})]})},Z=u.memo(V),_=({noteDuration:n,beatPattern:s})=>{const[t]=y(i=>i.editMode),r=s,{activeBeat:o}=N(),j=u.useMemo(()=>r.map((i,a)=>{const l=a%2!==0;switch(i){case"0":return l?e.jsx(f,{color:"disabled"}):e.jsx(p,{color:"disabled"});case"1":return l?e.jsx(f,{color:"primary"}):e.jsx(p,{color:"primary"});case"b":return l?e.jsx(W,{color:"primary"}):e.jsx(I,{color:"primary"});case"h":return l?e.jsx(L,{color:"primary"}):e.jsx(B,{color:"primary"});case"A":return l?e.jsx(f,{color:"warning"}):e.jsx(p,{color:"warning"});case"x":return e.jsx(w,{color:"primary"});case"c":return l?e.jsx(U,{color:"primary"}):e.jsx(k,{color:"primary"});default:return null}}),[r]);return e.jsx(e.Fragment,{children:e.jsx(C,{container:!0,columns:8,alignItems:"center",justifyContent:"center",children:r.map((i,a)=>e.jsxs(C,{size:{xs:2,sm:1,md:1},sx:{boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minWidth:"max-content"},children:[e.jsx(G,{id:a,noteDuration:n}),e.jsx(T,{icon:j[a],active:o===a}),t&&e.jsx(Z,{index:a})]},a))})})},$=u.memo(_);function O(){const[n]=y(o=>o.beatPattern),s=y(o=>o.noteDuration);X();const t=u.useMemo(()=>n.split(""),[n]),r=s;return e.jsx($,{noteDuration:r,beatPattern:t})}export{O as default};
