import{j as t,i as S,a as u,l as T,M as F,m as M,B as m}from"./ui-CMXPLWPe.js";import{r as c}from"./vendor-Bn94jRP8.js";import{c as C,u as g}from"./LDJson-CbQ8G8qI.js";import{S as f,P as j}from"./Icons-jkWiUZ6y.js";import{s as P,g as y,C as w,S as E}from"./index-BEXy74El.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=C("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=C("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function k(n){const[s,o]=c.useState([]);return()=>{const l=Date.now()/1e3,i=[...s,l].slice(-4);if(i.length>1){const d=i.slice(1).map((r,e)=>r-i[e]),h=d.reduce((r,e)=>r+e)/d.length,p=Math.round(60/h);n(p)}o(i)}}const v=()=>{const{toneSettings:n,dispatch:s}=g(),[o,a]=c.useState(n.tempo),l=()=>{const e=Math.min(o+10,300);a(e),s({type:"SET_TEMPO",payload:e})},i=()=>{const e=Math.max(o-10,40);a(e),s({type:"SET_TEMPO",payload:e})},d=e=>{const x=Number(e.target.value);a(x),s({type:"SET_TEMPO",payload:x})},p=k(e=>{a(e),s({type:"SET_TEMPO",payload:e})}),r=()=>{const e=Math.min(Math.max(o,40),300);e!==o&&(a(e),s({type:"SET_TEMPO",payload:e}))};return t.jsxs(S,{spacing:2,direction:"row",sx:{alignItems:"center",justifyContent:"center"},children:[t.jsx(u,{sx:{color:"#FFFFFF",width:"40px",minWidth:"40px",px:0},onClick:i,color:"primary",children:t.jsx(I,{})}),t.jsx(T,{value:o,onChange:d,variant:"outlined",size:"small",sx:{width:"60px"},onBlur:r}),t.jsx(u,{sx:{color:"#FFFFFF",width:"40px",minWidth:"40px",px:0},onClick:p,color:"primary",children:"TAP"}),t.jsx(u,{sx:{color:"#FFFFFF",width:"40px",minWidth:"40px",px:0},onClick:l,color:"primary",children:t.jsx(b,{})})]})},B=()=>{const{toneSettings:n,dispatch:s}=g(),o=async()=>{await P(),s({type:"SET_IS_PLAYING",payload:!n.isPlaying}),n.isPlaying?y().start():y().stop()};return c.useEffect(()=>()=>{n.isPlaying&&s({type:"SET_IS_PLAYING",payload:!1})},[s,n.isPlaying]),t.jsx(u,{sx:{width:"40px",minWidth:"40px",px:0},value:"play",onClick:o,children:n.isPlaying?t.jsx(f,{}):t.jsx(j,{})})},_=()=>{const n=c.useContext(w);if(!n)throw new Error("useChordSettings must be used within a ChordSettingsProvider");return n},A=()=>{const{chordSettings:n,dispatch:s}=_(),[o,a]=c.useState(null),l=!!o,i=e=>{s({type:"setCurrentChord",payload:e})},d=["G","A","C","D","E","F","Fm","Am","Dm","Em","Bm"],h=e=>{d.includes(e)&&i(e),r()},p=e=>{a(e.currentTarget)},r=()=>{a(null)};return t.jsxs(t.Fragment,{children:[t.jsx(u,{sx:{color:"#FFFFFF",width:"40px",minWidth:"40px",px:0},id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:p,children:n.currentChord}),t.jsx(F,{id:"basic-menu",anchorEl:o,open:l,onClose:r,MenuListProps:{"aria-labelledby":"basic-button"},children:d.map(e=>t.jsx(M,{onClick:()=>h(e),children:e},e))})]})},D=c.memo(A),q=()=>t.jsx(m,{sx:{position:"fixed",bottom:0,width:"100%",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsxs(m,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:1},children:[t.jsx(B,{}),t.jsx(v,{}),t.jsx(D,{})]})}),G=c.memo(q),z=()=>{const n=c.useContext(E);if(!n)throw new Error("useSequenceSettings must be used within a SequenceSettingsProvider");return n};export{G as C,I as M,b as P,_ as a,z as u};
